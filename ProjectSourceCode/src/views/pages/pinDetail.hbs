{{> nav }}

<div class="container py-5" style="background-color: #f4f4f4; min-height: 100vh;">
  <div class="row justify-content-center">
    <div class="col-md-10 col-lg-8">
      <form action="/pin/{{pinId}}/delete" method="POST" onsubmit="return confirm('Are you sure you want to delete this pin and all its content?');">
  <button class="btn btn-danger w-100" type="submit">ğŸ—‘ï¸ Delete This Pin</button>
</form>
      <div class="card shadow-sm p-4 rounded-4 mb-4" style="background-color: white;">
        <h2 class="text-center fw-bold mb-4" style="font-size: 1.8rem;">
          ğŸ“ {{pin.label}}
        </h2>
        <!-- Compact Image Grid Gallery -->
        <div class="d-flex flex-wrap gap-3 justify-content-center">
          {{#each images}}
            <div class="card" style="width: 200px;">
              <img src="/uploads/{{this.image_path}}" alt="Uploaded Image"
                  class="card-img-top"
                  style="object-fit: cover; height: 180px;" />

              {{#each ../comments}}
                {{#if (eq this.image_path ../this.image_path)}}
                  <div class="card-body p-1" style="font-size: 0.85rem;">
                    <p class="mb-1 text-dark"><strong></strong> {{this.comment}}</p>
                  </div>
                {{/if}}
              {{/each}}

            </div>
          {{/each}}
        </div>


        <!-- Combined Upload + Comment Form -->
        <form action="/pin/{{pinId}}/upload" method="POST" enctype="multipart/form-data" class="mb-4">
          <div class="mb-3">
            <label for="image" class="form-label fw-semibold">ğŸ“¸ Choose an Image</label>
            <input type="file" name="image" id="image" class="form-control" required>
          </div>
          <div class="mb-3">
            <label for="caption" class="form-label fw-semibold">ğŸ’¬ Add a Caption</label>
            <textarea name="caption" id="caption" rows="2" class="form-control" placeholder="(Optional) Write a caption..."></textarea>
          </div>
          <button class="btn btn-primary w-100" type="submit">Upload Post</button>
        </form>
      </div>

      <!-- Navigation Buttons -->
      <div class="text-center mt-5">
        <a href="/" class="btn btn-outline-secondary me-2">ğŸ  Home</a>
        <a href="/logout" class="btn btn-outline-danger">ğŸšª Logout</a>
      </div>
      

    </div>
  </div>
</div>
